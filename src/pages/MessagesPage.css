.messages-page-wrapper { display:flex; flex-direction:column; height:calc(100vh - 58px); max-width:var(--container-max); margin:0 auto; background:var(--color-bg-primary,#fff); min-height:0; }
.messages-topbar { position:sticky; top:0; z-index:60; display:flex; align-items:center; justify-content:space-between; padding:.55rem var(--container-pad-x); background:#ffffff; border-bottom:1px solid #e5e5e5; gap:.75rem; box-shadow:0 2px 4px -2px rgba(0,0,0,.08); }
.mt-menu-btn { background:#fff; border:1px solid #ddd; border-radius:6px; padding:.45rem .55rem; display:inline-flex; align-items:center; justify-content:center; font-size:.9rem; cursor:pointer; line-height:1; }
.mt-menu-btn:focus-visible { outline:2px solid var(--color-focus-ring); outline-offset:2px; }
.mt-left { display:flex; align-items:center; gap:.75rem; min-width:0; }
.mt-title { font-size:1rem; font-weight:600; margin:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mt-home { text-decoration:none; font-size:1.1rem; line-height:1; }
.mt-home:focus-visible, .mt-home:hover { outline:none; filter:brightness(.85); }
.messages-page-body { flex:1; display:flex; min-height:0; overflow:hidden; }
.messages-sidebar { width:320px; border-right:1px solid #eee; display:flex; flex-direction:column; background:#fff; transition:transform .3s ease, opacity .25s ease; will-change:transform; min-height:0; }
.messages-sidebar.mobile { position:fixed; top:0; left:0; bottom:0; z-index:70; transform:translateX(-100%); opacity:0; box-shadow:0 6px 28px -6px rgba(0,0,0,.3); max-width:82%; width:300px; }
.messages-sidebar.mobile.open { transform:translateX(0); opacity:1; }
.sidebar-header { display:flex; align-items:center; justify-content:space-between; padding:.75rem 1rem; border-bottom:1px solid #eee; }
.sidebar-title { font-size:.9rem; margin:0; font-weight:600; }
.close-btn { background:none; border:none; font-size:1.4rem; line-height:1; cursor:pointer; color:#444; }
.open-sidebar-btn { position:absolute; top:.75rem; left:.75rem; z-index:10; background:#fff; border:1px solid #ddd; border-radius:6px; padding:.45rem .6rem; font-size:.7rem; text-transform:uppercase; letter-spacing:.5px; font-weight:600; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.15); }
.open-sidebar-btn:hover { background:#f5f5f5; }
.chat-mobile-bar { background:#fff; border-bottom:1px solid #eee; padding:.5rem var(--container-pad-x); display:flex; align-items:center; }
.back-btn { background:#fff; border:1px solid #ddd; border-radius:8px; padding:.35rem .45rem; display:inline-flex; align-items:center; justify-content:center; color:#111; cursor:pointer; box-shadow:0 1px 2px rgba(0,0,0,.04); }
.back-btn:hover { background:#f7f7f7; }
.back-btn:focus-visible { outline:2px solid var(--color-focus-ring); outline-offset:2px; }
.messages-main { flex:1; display:flex; flex-direction:column; background:var(--color-bg-alt,#fafafa); position:relative; min-width:0; min-height:0; }
.chat-wrapper { display:flex; flex-direction:column; height:100%; min-height:0; }
.chat-scroll-anchor { display:flex; flex:1; min-height:0; }
.chat-scroll-anchor > .chat-window { flex:1; min-height:0; }
.messages-placeholder { margin:auto; text-align:center; color:#666; font-size:1rem; padding:2rem; max-width:360px; line-height:1.4; }
.offline-banner { background:#fff3cd; color:#8a6d3b; padding:.5rem 1rem; font-size:.75rem; border-bottom:1px solid #eed28a; }
.refresh-btn { background:none; border:none; cursor:pointer; font-size:.75rem; margin-left:auto; color:#0366d6; }
.refresh-btn:hover { text-decoration:underline; }
@media (max-width: 1024px){ .messages-sidebar { width:280px; } }
@media (max-width: 900px){ .messages-sidebar { width:260px; } }
@media (max-width: 720px){
	.messages-page-wrapper { height:calc(100dvh - 58px); }
	.mt-title { font-size:.95rem; }
	.messages-sidebar { display:block; }
	.messages-main { flex:1; }
		/* rely on .container gutters on mobile too */
	.messages-placeholder { padding:1.25rem; font-size:.9rem; }
	.chat-window .messages-area { padding:1rem .85rem 1.1rem; }
	.chat-window .message-bubble-wrapper { max-width:82%; }
	.chat-window .message-bubble { padding:.65rem .85rem; font-size:.9rem; }
	.chat-header { padding:.75rem .9rem; }
	.chat-header p { font-size:.7rem; }
	.message-input-area { padding:.75rem .9rem; gap:.65rem; }
	.message-input-area input { padding:.6rem .85rem; }
	.mt-menu-btn { margin-right:.35rem; }
}
@supports(padding:max(0px)){
	.messages-topbar { padding-top:max(.55rem, env(safe-area-inset-top)); }
	.messages-page-wrapper { padding-bottom:env(safe-area-inset-bottom); }
	.messages-sidebar.mobile { padding-top:env(safe-area-inset-top); }
}
